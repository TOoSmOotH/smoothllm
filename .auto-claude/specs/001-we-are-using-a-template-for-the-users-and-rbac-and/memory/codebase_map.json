{
  "discovered_files": {
    "backend/internal/custom/models/api_key.go": {
      "description": "ProxyAPIKey model for user-generated proxy API keys. KeyHash is hidden from JSON responses (json:\"-\"). Has relationship to Provider with CASCADE delete. Helper methods: IsExpired(), IsValid(), UpdateLastUsed(). Key prefix constant: \"sk-smoothllm-\"",
      "category": "model",
      "discovered_at": "2026-01-03T02:28:59.254853+00:00"
    },
    "backend/internal/custom/models/usage.go": {
      "description": "UsageRecord model for tracking LLM API request usage. Tracks tokens (input/output/total), cost, request duration, status code, and error messages. Has relationships to ProxyAPIKey and Provider with CASCADE delete. Helper methods: CalculateCost(inputCostPer1K, outputCostPer1K), IsError(), IsSuccess().",
      "category": "model",
      "discovered_at": "2026-01-03T02:30:28.880743+00:00"
    },
    "backend/internal/custom/migrations.go": {
      "description": "Custom migrations file for auto-migrating Provider, ProxyAPIKey, and UsageRecord models. Uses AutoMigrate function that takes *gorm.DB as parameter, designed to be called from RegisterRoutes().",
      "category": "database",
      "discovered_at": "2026-01-03T02:32:05.900498+00:00"
    },
    "backend/internal/custom/services/providers.go": {
      "description": "ProviderService with full CRUD operations for LLM provider management. Key methods: ListProviders(userID), GetProvider(userID, providerID), CreateProvider(userID, req), UpdateProvider(userID, providerID, req), DeleteProvider(userID, providerID), TestConnection(userID, providerID), TestConnectionWithRequest(req), GetProviderByIDInternal(providerID). ProviderResponse excludes APIKey for security. Validates provider_type (openai, anthropic, local), base_url format, and cost values.",
      "category": "service",
      "discovered_at": "2026-01-03T02:35:08.105029+00:00"
    },
    "backend/internal/custom/handlers/providers.go": {
      "description": "ProviderHandler for provider API endpoints. Uses NewProviderHandler(providerService) constructor. Implements ListProviders, GetProvider, CreateProvider, UpdateProvider, DeleteProvider, TestConnection, TestConnectionWithCredentials. Uses auth.GetUserID(c) for user authentication and strconv.ParseUint for ID parsing from URL params.",
      "category": "handlers",
      "discovered_at": "2026-01-03T02:37:00.324184+00:00"
    },
    "backend/internal/custom/handlers/keys.go": {
      "description": "KeyHandler for proxy API key management endpoints. Uses NewKeyHandler(keyService) constructor. Implements ListKeys, GetKey, CreateKey, UpdateKey, DeleteKey, RevokeKey. Uses auth.GetUserID(c) for user authentication and strconv.ParseUint for ID parsing from URL params. CreateKey returns full key once in response (KeyCreateResponse), subsequent GetKey calls only return key prefix for security.",
      "category": "handler",
      "discovered_at": "2026-01-03T02:43:42.947893+00:00"
    },
    "backend/internal/custom/services/proxy.go": {
      "description": "ProxyService for LLM request proxying. Key methods: NewProxyService(keyService, providerService), ValidateAndGetProvider(apiKey), ParseModelName(model, defaultProviderType), ProxyRequest(c, proxyKey, provider), ProxyWithReverseProxy(c, provider, modelInfo), ListModels(provider), GetProxyKeyFromRequest(c). Handles OpenAI\u2192Anthropic request transformation, preserves User-Agent, injects max_tokens for Anthropic. ProxyResult struct captures usage stats for tracking.",
      "category": "services",
      "discovered_at": "2026-01-03T02:48:40.520545+00:00"
    },
    "backend/internal/custom/handlers/proxy.go": {
      "description": "ProxyHandler for LLM proxy endpoints. Uses NewProxyHandler(proxyService) constructor. Implements ChatCompletions (POST /v1/chat/completions) and ListModels (GET /v1/models). Unlike other handlers that use JWT auth, proxy handlers authenticate via proxy API key in Authorization header using proxyService.GetProxyKeyFromRequest(c) and ValidateAndGetProvider(). Returns OpenAI-compatible error responses with error.message, error.type, and error.code fields.",
      "category": "handler",
      "discovered_at": "2026-01-03T02:50:30.850630+00:00"
    }
  },
  "last_updated": "2026-01-03T02:50:30.850637+00:00"
}